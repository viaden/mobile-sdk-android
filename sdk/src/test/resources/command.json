{
  "steps": [
    {
      "method": "POST",
      "url": "https://api.ampiri.com/v4/handshake?deviceId=%{device.id.value}",
      "body": {
        "adPlace": {
          "id": "adPlaceId",
          "type": "NATIVE"
        },
        "inventory": {
          "device": {
            "id": "%{device.id.value}",
            "idType": "%{device.id.type.ampiri}",
            "platform": "ANDROID",
            "vendor": "",
            "model": "",
            "osVersion": "",
            "userAgent": "",
            "screenSize": {
              "w": 0,
              "h": 0
            },
            "screenOrientation": "",
            "connectionType": ""
          },
          "sdk": {
            "version": ""
          }
        }
      },
      "requestScript": "string t = get(\"device.id.type\")\nif t==\"ADVERTISING_ID\" then t = \"GAID\" endif\nset(\"device.id.type.ampiri\", t)",
      "responseScript": "object jc = new org.json.JSONObject(content)\nobject jh = jc.getJSONObject(\"handshake\")\nstring key = jh.getString(\"key\")\nset(\"handshake.key\", key)"
    }
  ]
}
